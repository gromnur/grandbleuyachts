---
import { ViewTransitions } from "astro:transitions";
import { Image } from "astro:assets";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import "../styles/global.css";
import defaultBg from "../assets/images/front page.JPG";

interface Props {
  title: string;
  description?: string;
  hideFooter?: boolean;
  backgroundImage?: ImageMetadata;
  centerImage?: boolean;
  noBackground?: boolean;
}

const {
  title,
  description = "Grand Bleu Yachts - Premium yacht management, delivery, and charter services in the Bahamas and East Coast.",
  hideFooter = false,
  backgroundImage = defaultBg,
  centerImage = false,
  noBackground = false,
} = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <meta name="generator" content={Astro.generator} />

    <!-- Open Graph -->
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Grand Bleu Yachts" />

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:wght@500;600;700&display=swap"
      rel="stylesheet"
    />

    <ViewTransitions />

    <title>{title} | Grand Bleu Yachts</title>
  </head>
  <body>
    <Header />
    <main>
      {!noBackground && (
        <Image
          src={backgroundImage}
          alt="Background"
          class={`main-bg ${centerImage ? 'centered' : ''}`}
          loading="eager"
          quality={80}
        />
      )}
      <div class="main-content">
        <slot />
      </div>
    </main>
    {!hideFooter && <Footer />}
  </body><style is:global>
    /* View Transitions Customization */
    ::view-transition-old(root),
    ::view-transition-new(root) {
      animation-duration: 0.3s;
      animation-timing-function: ease-in-out;
    }

    @media (prefers-reduced-motion) {
      ::view-transition-old(root),
      ::view-transition-new(root) {
        animation: none !important;
      }
    }

    html {
      scroll-behavior: smooth;
      overflow-y: auto;
      overflow-x: hidden;
    }

    /* Hide scrollbar but keep functionality */
    html::-webkit-scrollbar {
      width: 0px;
      background: transparent;
    }

    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      margin: 0;
      padding: 0;
    }

    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 100;
      display: flex;
      flex-direction: column;
      height: var(--header-height);
      pointer-events: none;
    }

    header * {
      pointer-events: auto;
    }

    main {
      position: relative;
      display: flex;
      flex-direction: column;
      flex: 1;
      padding-bottom: var(--footer-height);
    }

    .main-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: calc(100vh - var(--footer-height));
      object-fit: cover;
      object-position: center bottom;
      z-index: -1;
      animation: float-vertical 12s ease-in-out infinite;
    }

    @keyframes float-vertical {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(var(--footer-height));
      }
    }

    .main-bg.centered {
      object-position: center center;
    }

    @media (max-width: 768px) {
      .main-bg.centered {
        object-position: calc(50% - 150px) center;
      }
    }

    .main-content {
      position: relative;
      z-index: 1;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      z-index: 100;
      height: var(--footer-height);
      display: flex;
      flex-direction: column;
    }
  </style>
</html>
