---
import Layout from '../layouts/Layout.astro';
import BackButton from '../components/BackButton.astro';
import ContactButton from '../components/ContactButton.astro';
import { Image } from 'astro:assets';
import managementImg1 from '../assets/images/management rotation.png';
import managementImg2 from '../assets/images/management rotation 2.png';
import managementImg3 from '../assets/images/management rotation 3.JPG';
---

<Layout
  title="Yacht Management"
  description="Professional yacht management services for owners seeking peace of mind and exceptional care for their vessels."
  backgroundImage={managementImg1}
  hideFooter={false}
>
  <!-- Side-by-side slideshow background -->
  <div class="slideshow-container" id="slideshow">
    <div class="slide active" id="slide-0">
      <Image src={managementImg1} alt="Yacht management" class="slide-img" loading="eager" quality={80} />
      <Image src={managementImg2} alt="Yacht management" class="slide-img" loading="eager" quality={80} />
    </div>
    <div class="slide" id="slide-1">
      <Image src={managementImg2} alt="Yacht management" class="slide-img" loading="eager" quality={80} />
      <Image src={managementImg3} alt="Yacht management" class="slide-img" loading="eager" quality={80} />
    </div>
    <div class="slide" id="slide-2">
      <Image src={managementImg3} alt="Yacht management" class="slide-img" loading="eager" quality={80} />
      <Image src={managementImg1} alt="Yacht management" class="slide-img" loading="eager" quality={80} />
    </div>
  </div>

  <div class="management-wrapper">
    <div class="management-page">
      <div class="management-top">
        <BackButton href="/" />
      </div>

      <h1>Yacht Management</h1>

      <div class="management-boxes">
        <div class="management-box intro-box">
          <p>
            At Grand Bleu Yachts, we offer a personalized and comprehensive yacht management service designed to keep your vessel in immaculate condition — ready to set sail whenever you are.
          </p>
          <p>
            Our experienced team ensures every detail is handled with precision, care, and discretion, allowing you to simply enjoy the pleasures of yachting without the stress of maintenance or logistics.
          </p>
        </div>

        <div class="management-box">
          <h3>Our Services</h3>
          <ul>
            <li>Regular yacht inspections</li>
            <li>Engine and cooling system monitoring</li>
            <li>Chartplotter and navigation updates</li>
            <li>Professional hull cleaning</li>
            <li>Diver scheduling and coordination</li>
            <li>Oversight of third-party maintenance and repairs</li>
            <li>Captain and crew for delivery or private charters</li>
            <li>Exclusive event and party planning</li>
            <li>Bespoke travel itineraries</li>
          </ul>
        </div>

        <div class="management-box">
          <h3>Dock Side Care</h3>
          <ul>
            <li>Routine dock line and fender inspections</li>
            <li>Shore power and battery monitoring</li>
            <li>Bilge pump checks and water intrusion prevention</li>
            <li>Air conditioning and dehumidifier management</li>
            <li>Exterior wash-downs and teak maintenance</li>
            <li>Canvas and upholstery care</li>
            <li>Coordination with marina staff and dock masters</li>
            <li>Storm preparation and post-weather assessments</li>
          </ul>
        </div>
      </div>

      <ContactButton />
    </div>
  </div>
</Layout>

<script>
  document.addEventListener('astro:page-load', () => {
    const slides = document.querySelectorAll<HTMLElement>('.slide');
    if (slides.length <= 1) return;

    let current = 0;

    slides.forEach((slide, i) => {
      slide.style.transition = 'opacity 1.5s ease-in-out';
      slide.style.opacity = i === 0 ? '1' : '0';
    });

    setInterval(() => {
      const prev = current;
      current = (current + 1) % slides.length;
      slides[prev].style.opacity = '0';
      slides[current].style.opacity = '1';
    }, 5000);
  });
</script>

<style>
  .management-wrapper {
    padding: var(--spacing-xl);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100%;
  }

  .management-page {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    color: var(--color-text-light);
    padding: var(--spacing-xl);
    width: 100%;
    max-width: 800px;
  }

  .management-top {
    width: 100%;
    display: flex;
    justify-content: flex-start;
    margin-bottom: var(--spacing-sm);
  }

  h1 {
    font-size: clamp(2.5rem, 6vw, 4rem);
    margin-bottom: var(--spacing-xl);
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
  }

  .management-boxes {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
    width: 100%;
    max-width: 600px;
    margin-bottom: var(--spacing-xl);
  }

  .management-box {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg) var(--spacing-xl);
    text-align: left;
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.15);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .intro-box {
    text-align: center;
  }

  .intro-box p {
    font-size: 1.1rem;
    line-height: 1.8;
    color: white;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
    margin: 0;
  }

  .management-box h3 {
    font-size: 1.4rem;
    margin-bottom: var(--spacing-md);
    color: white;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
  }

  .management-box ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .management-box li {
    font-size: 1.05rem;
    padding: var(--spacing-xs) 0;
    padding-left: var(--spacing-lg);
    position: relative;
    color: white;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
    line-height: 1.6;
  }

  .management-box li::before {
    content: "→";
    position: absolute;
    left: 0;
    color: white;
  }

  @media (max-width: 768px) {
    .management-wrapper {
      padding: var(--spacing-md);
    }

    .management-page {
      padding: var(--spacing-md);
    }

    .management-boxes {
      max-width: 100%;
    }

    h1 {
      font-size: clamp(2rem, 5vw, 3rem);
    }
  }
</style>

<style is:global>
  /* Hide the default Layout background image on management page */
  .main-bg {
    display: none !important;
  }

  .slideshow-container {
    position: fixed;
    top: var(--header-height);
    left: 0;
    width: 100%;
    height: calc(100vh - var(--header-height));
    z-index: -1;
    overflow: hidden;
  }

  .slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    gap: 4px;
    opacity: 0;
  }

  .slide.active {
    opacity: 1;
  }

  .slide-img {
    width: 50%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }

  @media (max-width: 768px) {
    .slide {
      gap: 2px;
    }
  }
</style>
